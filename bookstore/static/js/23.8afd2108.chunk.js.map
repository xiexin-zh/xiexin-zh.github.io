{"version":3,"sources":["scripts/views/bookclassify/index.js"],"names":["prompt","alert","ClassifyBook","connect","state","classifylist","getIn","this","props","dispatch","getClassify","url","className","title","showBack","map","m","i","key","style","width","display","justifyContent","paddingTop","List","onClick","text","onPress","value","console","log","addBookClassify","params","name","then","res","Component","changeClassify","id","_id","oldname","deleteClassify"],"mappings":"oRAIMA,EAAS,IAAMA,OACfC,EAAQ,IAAMA,MAYCC,EANpBC,aACC,SAAAC,GAAK,MAAK,CACRC,aAAcD,EAAME,MAAM,CAAC,OAAQ,oB,+LAQnCC,KAAKC,MAAMC,SAASC,YAAY,CAAEC,IAAK,8B,+BAG/B,IAAD,OACCN,EAAiBE,KAAKC,MAAtBH,aAER,OACE,uBAAKO,UAAU,gBACb,2BACE,gBAAC,IAAD,CAAMC,MAAM,2BAAOC,UAAU,KAE/B,uBAAKF,UAAU,gBAGXP,EAAaU,KAAI,SAACC,EAAGC,GACnB,OACE,uBAAKC,IAAKD,EAAGE,MAAO,CAAEC,MAAO,OAAQC,QAAS,OAAQC,eAAgB,SAAUC,WAAY,SAC1F,gBAACC,EAAD,CAAMR,EAAGA,EAAGP,SAAU,EAAKD,MAAMC,gBAW3C,uBAAKG,UAAU,QACb,wBACEa,QAAS,kBAAMzB,EAAO,eAAM,iCAAS,CACnC,CAAE0B,KAAM,gBACR,CACEA,KAAM,eACNC,QAAS,SAAAC,GACPC,QAAQC,IAAR,yCAAqBF,IACrB,EAAKpB,MAAMC,SAASsB,YAAgB,CAAEpB,IAAK,yBAA0BqB,OAAQ,CAAEC,KAAK,GAAD,OAAKL,OAAcM,MAAK,SAAAC,GACzGN,QAAQC,IAAIK,SAIjB,UAAW,KACdvB,UAAU,4B,GA9CoBwB,K,EAuDpCZ,E,iLACM,IAAD,OACCR,EAAMT,KAAKC,MAAXQ,EACR,OACE,uBAAKJ,UAAU,QACb,uBAAKA,UAAU,QAAQI,EAAEiB,MACzB,uBAAKrB,UAAU,UACb,wBACEA,UAAU,uBACVa,QAAS,kBAAMzB,EAAO,eAAM,uCAAU,CACpC,CAAE0B,KAAM,gBACR,CACEA,KAAM,eACNC,QAAS,SAAAC,GAELC,QAAQC,IAAR,yCAAqBF,IACrB,EAAKpB,MAAMC,SAAS4B,YAAe,CAAC1B,IAAI,4BAA4BqB,OAAO,CAACM,GAAGtB,EAAEuB,IAAIC,QAAQxB,EAAEiB,KAAKA,KAAK,GAAD,OAAIL,UAIjH,UAAW,OAEhB,wBACEH,QAAS,kBACPxB,EAAM,eAAM,wCAAW,CACrB,CAAEyB,KAAM,eAAMC,QAAS,kBAAME,QAAQC,IAAI,YACzC,CACEJ,KAAM,eACNC,QAAS,WACPE,QAAQC,IAAI,MACZ,EAAKtB,MAAMC,SAASgC,YAAe,CAAC9B,IAAI,4BAA4BqB,OAAO,CAACM,GAAGtB,EAAEuB,IAAIC,QAAQxB,EAAEiB,cAKvGrB,UAAU,gC,GAnCHwB,I","file":"static/js/23.8afd2108.chunk.js","sourcesContent":["\r\nimport './index.scss'\r\nimport Head from '~/components/Head'\r\nimport { Modal, Button, WingBlank, WhiteSpace, Toast } from 'antd-mobile';\r\nconst prompt = Modal.prompt;\r\nconst alert = Modal.alert;\r\n\r\nimport { connect } from 'react-redux'\r\nimport { addBookClassify, getClassify, deleteClassify, changeClassify } from '../../actions';\r\n\r\n\r\n@connect(\r\n  state => ({\r\n    classifylist: state.getIn(['data', 'classifylist'])\r\n  })\r\n)\r\n\r\nexport default class ClassifyBook extends Component {\r\n\r\n\r\n  componentDidMount() {\r\n    this.props.dispatch(getClassify({ url: '/bookstore/getClassify' }))\r\n  }\r\n\r\n  render() {\r\n    const { classifylist } = this.props;\r\n    // console.log(classifylist)\r\n    return (\r\n      <div className='bookclassify'>\r\n        <div>\r\n          <Head title='分类管理' showBack={true}></Head>\r\n        </div>\r\n        <div className=\"classifylist\">\r\n\r\n          {\r\n            classifylist.map((m, i) => {\r\n              return (\r\n                <div key={i} style={{ width: '100%', display: 'flex', justifyContent: 'center', paddingTop: '10px' }}>\r\n                  <List m={m} dispatch={this.props.dispatch}></List>\r\n                </div>\r\n              )\r\n            })\r\n          }\r\n\r\n\r\n\r\n\r\n        </div>\r\n\r\n        <div className=\"foot\">\r\n          <span\r\n            onClick={() => prompt('新增', '请输入类名', [\r\n              { text: '取消' },\r\n              {\r\n                text: '保存',\r\n                onPress: value => {\r\n                  console.log(`输入的内容:${value}`)\r\n                  this.props.dispatch(addBookClassify({ url: '/bookstore/addClassify', params: { name: `${value}` } })).then(res=>{\r\n                    console.log(res)\r\n                  })\r\n                }\r\n              },\r\n            ], 'default', '')}\r\n            className='iconfont icon-jia'></span>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n\r\n\r\nclass List extends Component {\r\n  render() {\r\n    const { m } = this.props;\r\n    return (\r\n      <div className='list'>\r\n        <div className='name'>{m.name}</div>\r\n        <div className='option'>\r\n          <span\r\n            className='iconfont icon-xiugai'\r\n            onClick={() => prompt('修改', '请输入新类名', [\r\n              { text: '取消' },\r\n              {\r\n                text: '保存',\r\n                onPress: value =>\r\n                  {\r\n                    console.log(`输入的内容:${value}`)\r\n                    this.props.dispatch(changeClassify({url:'/bookstore/changeClassify',params:{id:m._id,oldname:m.name,name:`${value}`}}))\r\n                  }\r\n                  \r\n              },\r\n            ], 'default', '')}\r\n          ></span>\r\n          <span\r\n            onClick={() =>\r\n              alert('删除', '确定要删除吗?', [\r\n                { text: '取消', onPress: () => console.log('cancel') },\r\n                {\r\n                  text: '确认',\r\n                  onPress: () => {\r\n                    console.log('ok')\r\n                    this.props.dispatch(deleteClassify({url:'/bookstore/deleteClassify',params:{id:m._id,oldname:m.name}}))\r\n                  }\r\n                },\r\n              ])\r\n            }\r\n            className='iconfont icon-shanchu'\r\n          ></span>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}"],"sourceRoot":""}