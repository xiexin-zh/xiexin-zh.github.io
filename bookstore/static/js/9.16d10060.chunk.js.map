{"version":3,"sources":["mobx/data.js","assets/default.jpg","scripts/components/bookinfo/index.js","scripts/components/uploadImg/index.js","scripts/components/list/index.js","scripts/views/bookchange/index.js"],"names":["DataStore","observable","require","action","url","data","axios","post","then","res","pic","touxiang","replace","params","get","result","avatar","username","usertel","files","length","imgs","cb","borrowbookinfo","num","count","module","exports","BookInfo","connect","state","classifylist","getIn","booklist","observer","props","onChange","val","setState","checkClassify","dispatch","getClassify","console","log","payload","selectClassify","v","asyncValue","bookinfo","classify","saveMsg","bookname","value","failToast","auther","publishing","description","id","updateBook","addNewBook","cols","name","extraname","this","getBookList","limit","setBookImg","changeBookImg","className","ref","el","title","placeholder","autoHeight","required","labelNumber","Item","wrap","extra","style","width","minWidth","showNumber","min","booknum","bookclassify","onOk","arrow","classitem","onClick","fontSize","padding","overflow","height","float","border","src","alt","color","boxSizing","text","display","justifyContent","alignItems","marginTop","type","Component","UploadImg","index","saveBookImgs","multiple","onImageClick","fs","selectable","alert","prompt","BookList","changinfo","history","push","book","flexDirection","marginBottom","_id","onPress","deleteBook","BookChange","showBack","match"],"mappings":"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","file":"static/js/9.16d10060.chunk.js","sourcesContent":["\r\n\r\nimport {observable,action} from 'mobx'\r\n\r\nimport {axios} from '@/utils/axios'\r\n\r\n\r\nclass DataStore{\r\n  @observable touxiang = require('@/assets/default.jpg');\r\n  @observable username = '尚未登陆';\r\n  @observable usertel = '';\r\n  @observable files = [];\r\n  @observable borrowbookinfo={};\r\n\r\n  @action setAvatar = ({url,data}) =>{\r\n    axios.post(url,data).then(res=>{\r\n      // console.log((res.data.pic).replace(/public/,'http://localhost:1906'))\r\n      if(res.data.pic){\r\n        this.touxiang = (res.data.pic).replace(/public/,'https://xx1314.fun:8001')\r\n      }\r\n      \r\n    })\r\n  }\r\n\r\n  @action getUserInfo = ({url,params})=>{\r\n    axios.get(url,{params}).then(res=>{\r\n      // console.log(res.data.result)\r\n      this.touxiang = res.data.result.avatar.replace(/public/,'https://xx1314.fun:8001');\r\n      this.username = res.data.result.username;\r\n      this.usertel = res.data.result.usertel;\r\n    })\r\n  }\r\n\r\n  @action saveBookImgs = (files)=>{\r\n    this.files = files\r\n  }\r\n\r\n  @action changeBookImg =()=>{\r\n    this.files.length=0;\r\n  }\r\n  @action setBookImg=(imgs)=>{\r\n    this.files = imgs\r\n  }\r\n\r\n\r\n  //借书----查询剩余书籍\r\n  @action getBookInfoById = ({url,params},cb)=>{\r\n    axios.get(url,{params}).then(res=>{\r\n      this.borrowbookinfo = res.data.result;\r\n      cb(res.data.result)\r\n    })\r\n  }\r\n\r\n\r\n  //改变书的数量\r\n  @action changBookCount=(num)=>{\r\n    this.borrowbookinfo.count -=num;\r\n  }\r\n\r\n}\r\n\r\nexport default new DataStore();","module.exports = \"data:image/jpeg;base64,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\"","import { List, TextareaItem, Stepper, PickerView, Picker, Button } from 'antd-mobile';\r\nimport { UploadImg } from '~/components/uploadImg'\r\nimport { connect } from 'react-redux'\r\nimport { getClassify, addNewBook, getBookList, updateBook } from '../../actions';\r\nimport { observer } from 'mobx-react'\r\nimport DataStore from '@/mobx/data'\r\nimport { failToast } from '&/methods'\r\nimport { history } from '&/history'\r\n\r\n@connect(\r\n  state => {\r\n    return {\r\n      classifylist: state.getIn(['data', 'classifylist']),\r\n      booklist: state.getIn(['data', 'booklist']),\r\n    }\r\n  }\r\n)\r\n\r\n@observer\r\n\r\n\r\nexport class BookInfo extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      val: 1,\r\n      data: [],\r\n      cols: 1,\r\n      asyncValue: [],\r\n      bookinfo: { count: 1 },\r\n      name: true,\r\n      extraname: '请选择'\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n\r\n    var id = this.props.id;\r\n    console.log(!!id)\r\n    if (!!id) {\r\n\r\n      this.props.dispatch(getBookList({\r\n        url: '/bookstore/getBookList',\r\n        params: {\r\n          id,\r\n          limit: 20,\r\n        }\r\n      })).then(res => {\r\n        console.log(res);\r\n        this.setState({\r\n          bookinfo: { ...this.state.bookinfo, ...res.payload[0] },\r\n        })\r\n        this.setState({\r\n          extraname: res.payload[0].classify,\r\n          asyncValue: [res.payload[0].classify]\r\n        })\r\n        // console.log(res.payload[0].imgs)\r\n        DataStore.setBookImg(res.payload[0].imgs)\r\n      })\r\n    } else {\r\n      DataStore.changeBookImg();\r\n    }\r\n  }\r\n\r\n  componentWillUnmount(){\r\n    DataStore.changeBookImg();\r\n  }\r\n\r\n  onChange = (val) => {\r\n    // console.log(val);\r\n    this.setState({ val });\r\n  }\r\n\r\n  //点击分类按钮\r\n  checkClassify = () => {\r\n\r\n    this.props.dispatch(getClassify({ url: '/bookstore/getClassify' })).then(res => {\r\n      console.log(res.payload)\r\n\r\n      this.setState({\r\n        data: res.payload\r\n      })\r\n    })\r\n\r\n  };\r\n\r\n  //选择分类确认\r\n  selectClassify = (v) => {\r\n    this.setState({\r\n      asyncValue: v,\r\n      bookinfo: { ...this.state.bookinfo, classify: v[0] }\r\n    })\r\n    console.log(v[0])\r\n\r\n  }\r\n\r\n  //保存到时数据库\r\n  saveMsg = () => {\r\n    // console.log(this.state.asyncValue)\r\n    if (this.bookname.state.value.length < 1) {\r\n      failToast('请填写书名信息', 1)\r\n      return\r\n    }\r\n    if (this.auther.state.value.length < 1) {\r\n      failToast('请填写作者信息', 1)\r\n      return\r\n    }\r\n    if (this.publishing.state.value.length < 1) {\r\n      failToast('请填写出版社信息', 1)\r\n      return\r\n    }\r\n    if (this.description.state.value.length < 1) {\r\n      failToast('请填写描述信息', 1)\r\n      return\r\n    }\r\n    if (this.state.asyncValue.length < 1) {\r\n      failToast('请选择分类', 1)\r\n      return\r\n    }\r\n\r\n    // console.log({...this.state.bookinfo,files:DataStore.files});\r\n\r\n    var id = this.props.id;\r\n    if (!!id) {\r\n      this.props.dispatch(updateBook({\r\n        url: '/bookstore/updateBook',\r\n        params: {\r\n          id,\r\n          bookinfo: { ...this.state.bookinfo, files: DataStore.files }\r\n        }\r\n      })).then(res => {\r\n\r\n      })\r\n    } else {\r\n\r\n      this.props.dispatch(addNewBook({\r\n        url: '/bookstore/addNewBook',\r\n        bookinfo: { ...this.state.bookinfo, files: DataStore.files }\r\n      })).then(res => {\r\n        \r\n      })\r\n    }\r\n\r\n  }\r\n\r\n\r\n  render() {\r\n    const { bookinfo } = this.state;\r\n    // console.log(DataStore.files)\r\n    return (\r\n      <div className=\"bookcon\">\r\n        <div className='booklist'>\r\n\r\n          <List>\r\n            <TextareaItem\r\n              ref={el => this.bookname = el}\r\n              title=\"书名：\"\r\n              placeholder='(必填)'\r\n              autoHeight\r\n              required\r\n              labelNumber={5}\r\n              value={bookinfo.name ? bookinfo.name : ''}\r\n              onChange={(val) => {\r\n                this.setState({\r\n                  bookinfo: { ...bookinfo, name: val }\r\n                })\r\n              }\r\n              }\r\n            />\r\n          </List>\r\n          <List>\r\n            <TextareaItem\r\n              ref={el => this.auther = el}\r\n              title=\"作者：\"\r\n              placeholder='(必填)'\r\n              value={bookinfo.auther ? bookinfo.auther : ''}\r\n              autoHeight\r\n              required\r\n              labelNumber={5}\r\n              onChange={(val) => {\r\n                this.setState({\r\n                  bookinfo: { ...bookinfo, auther: val }\r\n                })\r\n              }\r\n              }\r\n            />\r\n          </List>\r\n          <List>\r\n            <TextareaItem\r\n              ref={el => this.publishing = el}\r\n              title=\"出版社：\"\r\n              placeholder='(必填)'\r\n              value={bookinfo.publishing ? bookinfo.publishing : ''}\r\n              autoHeight\r\n              required\r\n              labelNumber={5}\r\n              onChange={(val) => {\r\n                this.setState({\r\n                  bookinfo: { ...bookinfo, publishing: val }\r\n                })\r\n              }\r\n              }\r\n            />\r\n          </List>\r\n          <List>\r\n            <TextareaItem\r\n              ref={el => this.description = el}\r\n              title=\"描述：\"\r\n              placeholder='(必填)'\r\n              value={bookinfo.description ? bookinfo.description : ''}\r\n              autoHeight\r\n              required\r\n              labelNumber={5}\r\n              onChange={(val) => {\r\n                this.setState({\r\n                  bookinfo: { ...bookinfo, description: val }\r\n                })\r\n              }\r\n              }\r\n            />\r\n          </List>\r\n          <List>\r\n            <List.Item\r\n              wrap\r\n              extra={\r\n                <Stepper\r\n                  style={{ width: '100%', minWidth: '100px' }}\r\n                  showNumber\r\n                  min={1}\r\n                  ref={el => this.booknum = el}\r\n                  value={this.state.bookinfo.count}\r\n                  onChange={(val) => {\r\n                    this.setState({\r\n                      bookinfo: { ...bookinfo, count: val }\r\n                    })\r\n                  }\r\n                  }\r\n                />}\r\n            >\r\n              数量：\r\n              </List.Item>\r\n          </List>\r\n\r\n\r\n          <Picker\r\n            title='选择分类'\r\n            data={this.state.data}\r\n            cols={this.state.cols}\r\n            extra={this.state.extraname}\r\n            value={this.state.asyncValue}\r\n            ref={el => this.bookclassify = el}\r\n            onOk={v => this.selectClassify(v)}\r\n          >\r\n            <List.Item arrow=\"horizontal\" ref={el => this.classitem = el} onClick={this.checkClassify}>分类：</List.Item>\r\n          </Picker>\r\n\r\n          <p className='upimg' style={{ width: '100px', fontSize: '16px', padding:'10px 15px'}}>上传封面：</p>\r\n\r\n          <div style={{overflow:'hidden',padding:'0 15px'}}>\r\n            <div id='bookimg' style={{ width: '90px', height: '100px' ,float:'left',border:'1px solid #ddd'}}>\r\n              <img style={{ width: '90px', height: '100px'}} src={DataStore.files.length == 0 ? '' : DataStore.files[0].url} alt=\"\" />\r\n            </div>\r\n            <div style={{width:'200px',height:'100px',float:'left'}}>\r\n              <UploadImg></UploadImg>\r\n            </div>\r\n          </div>\r\n\r\n          <p style={{ color: 'red', fontSize: '12px', padding: '15px', boxSizing: 'border-box' }}>注：不要上传>2M的图片；<span>{this.props.text}</span></p>\r\n\r\n        </div>\r\n        <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'ceter', marginTop: '30px' }}>\r\n          <Button style={{ width: '95%' }} type='primary' onClick={this.saveMsg}>保存</Button>\r\n        </div>\r\n      </div>\r\n\r\n    )\r\n  }\r\n}","\r\nimport './index.scss'\r\nimport { ImagePicker, WingBlank, SegmentedControl } from 'antd-mobile';\r\nimport {observer} from 'mobx-react'\r\nimport DataStore from '@/mobx/data'\r\n\r\n\r\n@observer\r\n\r\nexport class UploadImg extends Component {\r\n\r\n  constructor() {\r\n    super()\r\n    this.state = {\r\n      files: [],\r\n      multiple: false,\r\n    }\r\n  }\r\n\r\n\r\n  onChange = (files, type, index) => {\r\n    console.log(files, type, index);\r\n    DataStore.saveBookImgs(files);\r\n    this.setState({\r\n      files,\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { files } = this.state;\r\n    return (\r\n      <div>\r\n        <ImagePicker\r\n          files={files}\r\n          onChange={this.onChange}\r\n          onImageClick={(index, fs) => console.log(index, fs)}\r\n          selectable={files.length < 1}\r\n          multiple={this.state.multiple}\r\n        />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","\r\n\r\nimport './index.scss'\r\nimport { deleteBook } from '../../actions';\r\nimport { Modal, Button, WingBlank, WhiteSpace, Toast } from 'antd-mobile';\r\nconst prompt = Modal.prompt;\r\nconst alert = Modal.alert;\r\nimport {history} from '&/history'\r\n\r\nimport { connect } from 'react-redux'\r\n\r\n\r\n\r\nexport class BookList extends Component {\r\n  constructor() {\r\n    super();\r\n\r\n  }\r\n\r\n  changinfo=(id)=>{\r\n    console.log(id)\r\n    history.push(`/index/mode/bookchange/${id}`)\r\n  }\r\n\r\n\r\n  render() {\r\n    const { book } = this.props;\r\n    // console.log(book)\r\n    return (\r\n      <div style={{ height: '50px', display: 'flex', flexDirection: 'column', justifyContent: 'center', alignItems: 'center', marginBottom: '10px' }}>\r\n        <div className='lists'>\r\n          <div className='list_left'>\r\n            <img className=\"bookbg\" src={(book.imgs.length > 0) ? book.imgs[0].url : ''} alt=\"\" />\r\n          </div>\r\n          <div className='list_center'onClick={()=>this.changinfo(book._id)}>\r\n            <p className='p_name'>\r\n              <span style={{ display: 'block', float: 'left', width: '70%', overflow: 'hidden', color: '#484a4c' }}>{book.name}</span>\r\n              <span style={{ display: 'block', float: 'right', width: '30%', fontSize: '12px', overflow: 'hidden', color: '#005' }}>作者：{book.auther}</span>\r\n            </p>\r\n            <p className='p_code' style={{ color: '#08f2be' }}>编号：{book.id}</p>\r\n          </div>\r\n          <div className='list_right'>\r\n            <span\r\n              onClick={() =>\r\n                alert('删除', '确定要删除本书吗?', [\r\n                  { text: '取消', onPress: () => console.log('cancel') },\r\n                  {\r\n                    text: '确认',\r\n                    onPress: () => {\r\n                      console.log('ok')\r\n                      this.props.dispatch(deleteBook({ url: '/bookstore/deleteBook', params: { id: book._id } }))\r\n                    }\r\n                  },\r\n                ])\r\n              }\r\n              style={{ color: 'red' }} className='iconfont icon-shanchu'></span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}","\r\nimport './index.scss'\r\nimport Head from '~/components/Head'\r\nimport { BookList } from '~/components/list'\r\nimport { SearchBar, Button, WhiteSpace, WingBlank } from 'antd-mobile';\r\nimport { connect } from 'react-redux'\r\nimport { getBookList } from '../../actions';\r\nimport {BookInfo} from '~/components/bookinfo'\r\n\r\n\r\nexport default class BookChange extends Component {\r\n\r\n  render() {\r\n    // console.log(this.props.match.params)\r\n    return (\r\n      <div className='changebook1'>\r\n        <Head title='信息修改' showBack={true}></Head>\r\n        <BookInfo id={this.props.match.params.id}></BookInfo>\r\n      </div>\r\n    )\r\n  }\r\n}"],"sourceRoot":""}