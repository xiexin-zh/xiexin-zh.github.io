(window.webpackJsonpbookstore=window.webpackJsonpbookstore||[]).push([[21],{282:function(e,t,a){e.exports=a.p+"static/media/txm.194a3bd4.jpg"},339:function(e,t,a){"use strict";a.r(t),function(e,n){a.d(t,"default",(function(){return y})),a.d(t,"SearchList",(function(){return g}));a(64);var r,s=a(54),o=a.n(s),c=(a(257),a(258)),l=a.n(c),i=(a(278),a(280)),m=a.n(i),u=(a(88),a(47)),p=a.n(u),d=a(11),b=a(12),h=a(15),f=a(13),E=a(14),k=(a(340),a(53)),v=a(87),w=a(29),N=a(23),y=Object(v.b)((function(e){return{borrowlist:e.getIn(["data","borrowlist"])}}))(r=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(h.a)(this,Object(f.a)(t).call(this))).searchBook=function(){var t=e.readertel.state.value;console.log(t),0!=t.length?e.props.dispatch(Object(N.u)({url:"/bookstore/getBorrowBook",params:{readertel:t}})).then((function(t){e.props.borrowlist.length>0?e.setState({detail:!0}):e.setState({detail:!1})})):Object(w.b)("\u8bf7\u8f93\u5165\u624b\u673a\u53f7",.8)},e.state={txm:a(282),detail:!1,tipMsg:"\u8bf7\u8f93\u5165\u4e66\u7c4d\u7f16\u53f7\u67e5\u8be2..."},e}return Object(E.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(N.x)}},{key:"render",value:function(){var e=this;return n.createElement("div",{className:"bookrepay"},n.createElement(k.a,{title:"\u8fd8\u4e66\u7ba1\u7406",showBack:!0}),n.createElement("div",null,n.createElement(m.a,{marqueeProps:{loop:!0,style:{padding:"0 7.5px"}}},"\u6ce8\u610f\uff1a\u8bf7\u5982\u5b9e\u586b\u5199\u4ee5\u4e0b\u4fe1\u606f\u3002")),n.createElement("div",{className:"repaybox"},n.createElement("div",{className:"txm"},n.createElement("div",{className:"sys"},n.createElement("img",{src:this.state.txm,alt:""}),n.createElement("div",{className:"search"},n.createElement("span",{className:"iconfont icon-tubiaozhizuomoban"}))),n.createElement("p",null,"\u70b9\u51fb\u626b\u7801\u8fd8\u4e66")),n.createElement("div",{className:"searchbook"},n.createElement(o.a,{className:"booksearch"},n.createElement(l.a,{ref:function(t){return e.readertel=t},title:"\u624b\u673a\u53f7\uff1a",autoHeight:!0,required:!0,labelNumber:5})),n.createElement("div",{className:"searchBtn"},n.createElement("p",null,"\u8bf7\u8f93\u5165\u624b\u673a\u53f7\u8fdb\u884c\u641c\u7d22"),n.createElement("span",{onClick:this.searchBook,className:"iconfont icon-sousuo"}))),0==!this.props.borrowlist.length&&this.props.borrowlist.map((function(t,a){return n.createElement("div",{key:a,className:"searchlist"},n.createElement(g,{list:t,dispatch:e.props.dispatch}))})),0==this.props.borrowlist&&n.createElement("div",{className:"errorTip"},"\u6ca1\u6709\u641c\u7d22\u5230\u501f\u4e66\u8bb0\u5f55")))}}]),t}(e))||r,g=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(h.a)(this,Object(f.a)(t).call(this))).reduce=function(){e.state.borrowcount<=1||e.setState({borrowcount:--e.state.borrowcount})},e.add=function(){e.state.borrowcount>=e.state.num||e.setState({borrowcount:++e.state.borrowcount})},e.repayBook=function(t,a,n,r){var s=e.state.borrowcount;e.props.dispatch(Object(N.o)({url:"/bookstore/bookRepay",params:{readertel:a,bookid:t,backcount:s,num:n,borrowid:r}})).then((function(t){e.props.dispatch(Object(N.u)({url:"/bookstore/getBorrowBook",params:{readertel:a}}))}))},e.state={borrowcount:1,num:3},e}return Object(E.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){this.setState({num:this.props.list.num})}},{key:"render",value:function(){var e=this,t=this.state,a=t.borrowcount,r=(t.num,this.props.list);return n.createElement("div",{className:"resultlist"},n.createElement("div",{className:"r_box"},n.createElement("div",{className:"readerinfo"},n.createElement("p",null,n.createElement("span",{className:"spansty"},r.readername),n.createElement("span",{className:"spansty"},r.readertel))),n.createElement("div",{className:"bookinfo"},n.createElement("p",null,n.createElement("span",{className:"spansty"},r.bookname),n.createElement("span",{className:"spansty"},r.bookid))),n.createElement("div",{className:"bookinfo"},n.createElement("p",null,n.createElement("span",{className:"spansty"},"\u501f\u4e66\u6570\u91cf"),n.createElement("span",{className:"spansty"},r.num))),n.createElement("div",{className:"borrowcount"},n.createElement("div",{className:"spansty"},"\u8fd8\u4e66\u6570\u91cf"),n.createElement("div",{className:"spansty"},n.createElement("span",{style:{width:"20px",height:"20px",fontSize:"20px",marginRight:"5px",display:"inline-block",textAlign:"left"},onClick:this.reduce,ref:function(t){return e.descval=t}},"-"),n.createElement("input",{style:{width:"40px",border:"0",textAlign:"center"},disabled:!0,value:a,type:"number",ref:function(t){return e.count=t},onChange:function(t){e.setState({borrowcount:t})}}),n.createElement("span",{style:{width:"40px",height:"20px",fontSize:"20px",marginLeft:"5px",display:"inline-block",textAlign:"center"},onClick:this.add,ref:function(t){return e.addval=t}},"+"))),n.createElement("div",{className:"repayBtn"},n.createElement(p.a,{className:"btn",onClick:function(){return e.repayBook(r.bookid,r.readertel,r.num,r._id)}},"\u5f52\u8fd8"))))}}]),t}(e)}.call(this,a(0).Component,a(0))},340:function(e,t,a){}}]);
//# sourceMappingURL=21.d4ef1ec1.chunk.js.map