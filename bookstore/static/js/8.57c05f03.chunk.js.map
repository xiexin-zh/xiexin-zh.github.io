{"version":3,"sources":["scripts/components/list/index.js","scripts/views/bookdelete/index.js","../node_modules/antd-mobile/lib/search-bar/style/css.js","../node_modules/antd-mobile/lib/search-bar/index.js","../node_modules/antd-mobile/lib/_util/getDataAttr.js","../node_modules/antd-mobile/lib/search-bar/PropsType.js","../node_modules/antd-mobile/lib/search-bar/locale/zh_CN.js"],"names":["alert","prompt","BookList","changinfo","id","console","log","history","push","book","this","props","style","height","display","flexDirection","justifyContent","alignItems","marginBottom","className","src","imgs","length","url","alt","onClick","_id","float","width","overflow","color","name","fontSize","auther","text","onPress","dispatch","deleteBook","params","Component","DeleteBook","connect","state","booklist","getIn","searchBook","value","getBookList","limit","then","res","title","showBack","ref","el","bookname","placeholder","onSubmit","onCancel","map","i","key","Object","defineProperty","exports","_extends3","_interopRequireDefault","_defineProperty3","_classCallCheck3","_createClass3","_possibleConstructorReturn3","_inherits3","_classnames5","React","_interopRequireWildcard","PropTypes","_rmcFeedback2","_getDataAttr2","_getLocale","_PropsType","obj","__esModule","newObj","prototype","hasOwnProperty","call","SearchBar","_React$Component","_this","__proto__","getPrototypeOf","e","preventDefault","inputRef","blur","onChange","focus","setState","target","onFocus","firstFocus","onBlur","cb","onBlurTimeout","blurFromOnClear","document","activeElement","window","requestAnimationFrame","setTimeout","body","scrollTop","onClear","doClear","arguments","undefined","defaultValue","rightBtnRef","initBtn","getComputedStyle","rightBtnInitMarginleft","marginLeft","componentDidUpdate","syntheticPhRef","inputContainerRef","indexOf","prefixCls","syntheticPhContainerRef","realWidth","getBoundingClientRect","Math","ceil","showCancelButton","marginRight","offsetWidth","parseInt","nextProps","nextFrameId","cancelAnimationFrame","clearTimeout","_classnames3","_this2","_props","disabled","maxLength","cancelText","getComponentLocale","context","_state","wrapCls","clearCls","cancelCls","createElement","action","visibility","type","activeClassName","defaultProps","contextTypes","antLocale","object","module","keys","reduce","prev","substr","noop"],"mappings":"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","file":"static/js/8.57c05f03.chunk.js","sourcesContent":["\r\n\r\nimport './index.scss'\r\nimport { deleteBook } from '../../actions';\r\nimport { Modal, Button, WingBlank, WhiteSpace, Toast } from 'antd-mobile';\r\nconst prompt = Modal.prompt;\r\nconst alert = Modal.alert;\r\nimport {history} from '&/history'\r\n\r\nimport { connect } from 'react-redux'\r\n\r\n\r\n\r\nexport class BookList extends Component {\r\n  constructor() {\r\n    super();\r\n\r\n  }\r\n\r\n  changinfo=(id)=>{\r\n    console.log(id)\r\n    history.push(`/index/mode/bookchange/${id}`)\r\n  }\r\n\r\n\r\n  render() {\r\n    const { book } = this.props;\r\n    // console.log(book)\r\n    return (\r\n      <div style={{ height: '50px', display: 'flex', flexDirection: 'column', justifyContent: 'center', alignItems: 'center', marginBottom: '10px' }}>\r\n        <div className='lists'>\r\n          <div className='list_left'>\r\n            <img className=\"bookbg\" src={(book.imgs.length > 0) ? book.imgs[0].url : ''} alt=\"\" />\r\n          </div>\r\n          <div className='list_center'onClick={()=>this.changinfo(book._id)}>\r\n            <p className='p_name'>\r\n              <span style={{ display: 'block', float: 'left', width: '70%', overflow: 'hidden', color: '#484a4c' }}>{book.name}</span>\r\n              <span style={{ display: 'block', float: 'right', width: '30%', fontSize: '12px', overflow: 'hidden', color: '#005' }}>作者：{book.auther}</span>\r\n            </p>\r\n            <p className='p_code' style={{ color: '#08f2be' }}>编号：{book.id}</p>\r\n          </div>\r\n          <div className='list_right'>\r\n            <span\r\n              onClick={() =>\r\n                alert('删除', '确定要删除本书吗?', [\r\n                  { text: '取消', onPress: () => console.log('cancel') },\r\n                  {\r\n                    text: '确认',\r\n                    onPress: () => {\r\n                      console.log('ok')\r\n                      this.props.dispatch(deleteBook({ url: '/bookstore/deleteBook', params: { id: book._id } }))\r\n                    }\r\n                  },\r\n                ])\r\n              }\r\n              style={{ color: 'red' }} className='iconfont icon-shanchu'></span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}","\r\nimport './index.scss'\r\nimport Head from '~/components/Head'\r\nimport { BookList } from '~/components/list'\r\nimport { SearchBar, Button, WhiteSpace, WingBlank } from 'antd-mobile';\r\nimport { connect } from 'react-redux'\r\nimport { getBookList } from '../../actions';\r\n\r\n\r\n@connect(\r\n  state => {\r\n    return {\r\n      booklist: state.getIn(['data', 'booklist']),\r\n    }\r\n  }\r\n)\r\n\r\nexport default class DeleteBook extends Component {\r\n\r\n\r\n  searchBook = (value) => {\r\n    console.log(value)\r\n    this.props.dispatch(getBookList({\r\n      url: '/bookstore/getBookList',\r\n      params: {\r\n        name: value,\r\n        limit: 20,\r\n      }\r\n    }))\r\n  }\r\n\r\n\r\n\r\n  componentDidMount() {\r\n    this.props.dispatch(getBookList({\r\n      url: '/bookstore/getBookList',\r\n      params: {\r\n        limit: 20,\r\n      }\r\n    })).then(res => {\r\n\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const { booklist } = this.props\r\n    return (\r\n      <div className='deletebook'>\r\n        <Head title='图书修改' showBack={true}></Head>\r\n        <SearchBar ref={el => this.bookname = el} placeholder=\"请输入书名\" onSubmit={this.searchBook} onCancel={() => {\r\n          this.bookname.state.value = '';\r\n          this.props.dispatch(getBookList({\r\n            url: '/bookstore/getBookList',\r\n            params: {\r\n              limit: 20,\r\n            }\r\n          }))\r\n        }} />\r\n        <div className='booklist1'>\r\n          {\r\n            booklist.map((book, i) => {\r\n              return (\r\n                <BookList dispatch={this.props.dispatch} key={i} book={book}></BookList>\r\n              )\r\n            })\r\n          }\r\n\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}","'use strict';\n\nrequire('../../style/css');\n\nrequire('./index.css');","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _defineProperty2 = require('babel-runtime/helpers/defineProperty');\n\nvar _defineProperty3 = _interopRequireDefault(_defineProperty2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _classnames4 = require('classnames');\n\nvar _classnames5 = _interopRequireDefault(_classnames4);\n\nvar _react = require('react');\n\nvar React = _interopRequireWildcard(_react);\n\nvar _propTypes = require('prop-types');\n\nvar PropTypes = _interopRequireWildcard(_propTypes);\n\nvar _rmcFeedback = require('rmc-feedback');\n\nvar _rmcFeedback2 = _interopRequireDefault(_rmcFeedback);\n\nvar _getDataAttr = require('../_util/getDataAttr');\n\nvar _getDataAttr2 = _interopRequireDefault(_getDataAttr);\n\nvar _getLocale = require('../_util/getLocale');\n\nvar _PropsType = require('./PropsType');\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj['default'] = obj;\n    return newObj;\n  }\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n}\n\nfunction onNextFrame(cb) {\n  if (window.requestAnimationFrame) {\n    return window.requestAnimationFrame(cb);\n  }\n\n  return window.setTimeout(cb, 1);\n}\n\nfunction clearNextFrameAction(nextFrameId) {\n  if (window.cancelAnimationFrame) {\n    window.cancelAnimationFrame(nextFrameId);\n  } else {\n    window.clearTimeout(nextFrameId);\n  }\n}\n\nvar SearchBar = function (_React$Component) {\n  (0, _inherits3['default'])(SearchBar, _React$Component);\n\n  function SearchBar(props) {\n    (0, _classCallCheck3['default'])(this, SearchBar);\n\n    var _this = (0, _possibleConstructorReturn3['default'])(this, (SearchBar.__proto__ || Object.getPrototypeOf(SearchBar)).call(this, props));\n\n    _this.onSubmit = function (e) {\n      e.preventDefault();\n\n      if (_this.props.onSubmit) {\n        _this.props.onSubmit(_this.state.value || '');\n      }\n\n      if (_this.inputRef) {\n        _this.inputRef.blur();\n      }\n    };\n\n    _this.onChange = function (e) {\n      if (!_this.state.focus) {\n        _this.setState({\n          focus: true\n        });\n      }\n\n      var value = e.target.value;\n\n      if (!('value' in _this.props)) {\n        _this.setState({\n          value: value\n        });\n      }\n\n      if (_this.props.onChange) {\n        _this.props.onChange(value);\n      }\n    };\n\n    _this.onFocus = function () {\n      _this.setState({\n        focus: true\n      });\n\n      _this.firstFocus = true;\n\n      if (_this.props.onFocus) {\n        _this.props.onFocus();\n      }\n    };\n\n    _this.onBlur = function () {\n      _this.onBlurTimeout = onNextFrame(function () {\n        if (!_this.blurFromOnClear) {\n          if (document.activeElement !== _this.inputRef) {\n            _this.setState({\n              focus: false\n            });\n          }\n        }\n\n        _this.blurFromOnClear = false;\n      });\n\n      if (_this.props.onBlur) {\n        // fix autoFocus item blur with flash\n        setTimeout(function () {\n          // fix ios12 wechat browser click failure after input\n          if (document.body) {\n            document.body.scrollTop = document.body.scrollTop;\n          }\n        }, 100);\n\n        _this.props.onBlur();\n      }\n    };\n\n    _this.onClear = function () {\n      _this.doClear();\n    };\n\n    _this.doClear = function () {\n      var blurFromOnClear = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      _this.blurFromOnClear = blurFromOnClear;\n\n      if (!('value' in _this.props)) {\n        _this.setState({\n          value: ''\n        });\n      }\n\n      if (_this.props.onClear) {\n        _this.props.onClear('');\n      }\n\n      if (_this.props.onChange) {\n        _this.props.onChange('');\n      }\n\n      if (blurFromOnClear) {\n        _this.focus();\n      }\n    };\n\n    _this.onCancel = function () {\n      if (_this.props.onCancel) {\n        _this.props.onCancel(_this.state.value || '');\n      } else {\n        _this.doClear(false);\n      }\n    };\n\n    _this.focus = function () {\n      if (_this.inputRef) {\n        _this.inputRef.focus();\n      }\n    };\n\n    var value = void 0;\n\n    if ('value' in props) {\n      value = props.value || '';\n    } else if ('defaultValue' in props) {\n      value = props.defaultValue;\n    } else {\n      value = '';\n    }\n\n    _this.state = {\n      value: value,\n      focus: false\n    };\n    return _this;\n  }\n\n  (0, _createClass3['default'])(SearchBar, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      if (this.rightBtnRef) {\n        var initBtn = window.getComputedStyle(this.rightBtnRef);\n        this.rightBtnInitMarginleft = initBtn.marginLeft;\n      }\n\n      this.componentDidUpdate();\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate() {\n      if (this.syntheticPhRef) {\n        if (this.inputContainerRef && this.inputContainerRef.className.indexOf(this.props.prefixCls + '-start') > -1) {\n          // 检测是否包含名为 ${this.props.prefixCls}-start 样式，生成动画\n          // offsetWidth 某些时候是向上取整，某些时候是向下取整，不能用\n          if (this.syntheticPhContainerRef) {\n            var realWidth = this.syntheticPhContainerRef.getBoundingClientRect().width; // 包含小数\n\n            this.syntheticPhRef.style.width = Math.ceil(realWidth) + 'px';\n          }\n\n          if (!this.props.showCancelButton && this.rightBtnRef) {\n            this.rightBtnRef.style.marginRight = '0';\n          }\n        } else {\n          this.syntheticPhRef.style.width = '100%';\n\n          if (!this.props.showCancelButton && this.rightBtnRef) {\n            this.rightBtnRef.style.marginRight = '-' + (this.rightBtnRef.offsetWidth + (this.rightBtnInitMarginleft != null ? parseInt(this.rightBtnInitMarginleft, 10) : 0)) + 'px';\n          }\n        }\n      }\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      if ('value' in nextProps && nextProps.value !== this.state.value) {\n        this.setState({\n          value: nextProps.value\n        });\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      if (this.onBlurTimeout) {\n        clearNextFrameAction(this.onBlurTimeout);\n        this.onBlurTimeout = null;\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _classnames3,\n          _this2 = this;\n\n      var _props = this.props,\n          prefixCls = _props.prefixCls,\n          showCancelButton = _props.showCancelButton,\n          disabled = _props.disabled,\n          placeholder = _props.placeholder,\n          className = _props.className,\n          style = _props.style,\n          maxLength = _props.maxLength; // tslint:disable-next-line:variable-name\n\n      var _locale = (0, _getLocale.getComponentLocale)(this.props, this.context, 'SearchBar', function () {\n        return require('./locale/zh_CN');\n      });\n\n      var cancelText = _locale.cancelText;\n      var _state = this.state,\n          value = _state.value,\n          focus = _state.focus;\n      var wrapCls = (0, _classnames5['default'])(prefixCls, className, (0, _defineProperty3['default'])({}, prefixCls + '-start', !!(focus || value && value.length > 0)));\n      var clearCls = (0, _classnames5['default'])(prefixCls + '-clear', (0, _defineProperty3['default'])({}, prefixCls + '-clear-show', !!(focus && value && value.length > 0)));\n      var cancelCls = (0, _classnames5['default'])(prefixCls + '-cancel', (_classnames3 = {}, (0, _defineProperty3['default'])(_classnames3, prefixCls + '-cancel-show', !!(showCancelButton || focus || value && value.length > 0)), (0, _defineProperty3['default'])(_classnames3, prefixCls + '-cancel-anim', this.firstFocus), _classnames3));\n      return React.createElement('form', {\n        onSubmit: this.onSubmit,\n        className: wrapCls,\n        style: style,\n        ref: function ref(el) {\n          return _this2.inputContainerRef = el;\n        },\n        action: '#'\n      }, React.createElement('div', {\n        className: prefixCls + '-input'\n      }, React.createElement('div', {\n        className: prefixCls + '-synthetic-ph',\n        ref: function ref(el) {\n          return _this2.syntheticPhRef = el;\n        }\n      }, React.createElement('span', {\n        className: prefixCls + '-synthetic-ph-container',\n        ref: function ref(el) {\n          return _this2.syntheticPhContainerRef = el;\n        }\n      }, React.createElement('i', {\n        className: prefixCls + '-synthetic-ph-icon'\n      }), React.createElement('span', {\n        className: prefixCls + '-synthetic-ph-placeholder' // tslint:disable-next-line:jsx-no-multiline-js\n        ,\n        style: {\n          visibility: placeholder && !value ? 'visible' : 'hidden'\n        }\n      }, placeholder))), React.createElement('input', (0, _extends3['default'])({\n        type: 'search',\n        className: prefixCls + '-value',\n        value: value,\n        disabled: disabled,\n        placeholder: placeholder,\n        onChange: this.onChange,\n        onFocus: this.onFocus,\n        onBlur: this.onBlur,\n        ref: function ref(el) {\n          return _this2.inputRef = el;\n        },\n        maxLength: maxLength\n      }, (0, _getDataAttr2['default'])(this.props))), React.createElement(_rmcFeedback2['default'], {\n        activeClassName: prefixCls + '-clear-active'\n      }, React.createElement('a', {\n        onClick: this.onClear,\n        className: clearCls\n      }))), React.createElement('div', {\n        className: cancelCls,\n        onClick: this.onCancel,\n        ref: function ref(el) {\n          return _this2.rightBtnRef = el;\n        }\n      }, this.props.cancelText || cancelText));\n    }\n  }]);\n  return SearchBar;\n}(React.Component);\n\nexports['default'] = SearchBar;\nSearchBar.defaultProps = _PropsType.defaultProps;\nSearchBar.contextTypes = {\n  antLocale: PropTypes.object\n};\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports['default'] = function (props) {\n  return Object.keys(props).reduce(function (prev, key) {\n    if (key.substr(0, 5) === 'aria-' || key.substr(0, 5) === 'data-' || key === 'role') {\n      prev[key] = props[key];\n    }\n\n    return prev;\n  }, {});\n};\n\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction noop() {}\n\nvar defaultProps = exports.defaultProps = {\n  prefixCls: 'am-search',\n  placeholder: '',\n  onSubmit: noop,\n  onChange: noop,\n  onFocus: noop,\n  onBlur: noop,\n  onClear: noop,\n  showCancelButton: false,\n  disabled: false\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports['default'] = {\n  cancelText: '取消'\n};\nmodule.exports = exports['default'];"],"sourceRoot":""}